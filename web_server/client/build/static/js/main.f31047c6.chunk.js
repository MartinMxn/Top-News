(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,a,t){e.exports=t.p+"static/media/logo.f9ebcc13.png"},34:function(e,a,t){e.exports=t(61)},50:function(e,a,t){},54:function(e,a,t){},55:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){},58:function(e,a,t){},61:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),r=t(26),l=t.n(r),o=t(4),i=t(5),c=t(6),m=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,null,[{key:"authenticateUser",value:function(e,a){localStorage.setItem("token",e),localStorage.setItem("email",a)}},{key:"isUserAuthenticated",value:function(){return null!==localStorage.getItem("token")}},{key:"deauthenticateUser",value:function(){localStorage.removeItem("token"),localStorage.removeItem("email")}},{key:"getToken",value:function(){return localStorage.getItem("token")}},{key:"getEmail",value:function(){return localStorage.getItem("email")}}]),e}(),u=(t(50),function(e){var a=e.children;return s.a.createElement("div",null,s.a.createElement("nav",{className:"nav-bar indigo lighten-1"},s.a.createElement("div",{className:"nav-wrapper"},s.a.createElement("a",{href:"/",className:"brand-logo"}," ","Tap News"),s.a.createElement("ul",{id:"nav-mobile",className:"right"},m.isUserAuthenticated()?s.a.createElement("div",null,s.a.createElement("li",null,m.getEmail()),s.a.createElement("li",null,s.a.createElement(o.a,{to:"/logout"},"Log out"))):s.a.createElement("div",null,s.a.createElement("li",null,s.a.createElement(o.a,{to:"/login"},"Log in")),s.a.createElement("li",null,s.a.createElement(o.a,{to:"/signup"},"Sign up")))))),s.a.createElement("br",null),a)}),d=(t(51),t(32)),p=t.n(d),h=(t(54),t(10)),w=t(9),g=t(11),v=(t(55),t(56),function(e){function a(){return Object(i.a)(this,a),Object(h.a)(this,Object(w.a)(a).apply(this,arguments))}return Object(g.a)(a,e),Object(c.a)(a,[{key:"redirectToUrl",value:function(e,a){window.open(e,"_blank")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"news-container",onClick:function(a){return e.redirectToUrl(e.props.news.url,a)}},s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s4 fill"},s.a.createElement("img",{src:this.props.news.urlToImage,alt:"news"})),s.a.createElement("div",{className:"col s8"},s.a.createElement("div",{className:"news-intro-col"},s.a.createElement("div",{className:"news-intro-panel"},s.a.createElement("h4",null,this.props.news.title),s.a.createElement("div",{className:"news-description"},s.a.createElement("p",null,this.props.news.description),s.a.createElement("div",null,null!=this.props.news.source&&s.a.createElement("div",{className:"chip light-blue news-chip"},this.props.news.source),null!=this.props.news.reason&&s.a.createElement("div",{className:"chip light-green news-chip"},this.props.news.reason),null!=this.props.news.time&&s.a.createElement("div",{className:"chip amber news-chip"},this.props.news.time))))))))}}]),a}(s.a.Component)),E=t(33),f=t.n(E),N=function(e){function a(){var e;return Object(i.a)(this,a),(e=Object(h.a)(this,Object(w.a)(a).call(this))).state={news:null,pageNum:1,loadedAll:!1},e}return Object(g.a)(a,e),Object(c.a)(a,[{key:"handleScroll",value:function(){var e=window.scrollY||window.pageYOffset||document.documentElement.scrollYTop;window.innerHeight+e>=document.body.offsetHeight-50&&(console.log("Loading more news!"),this.loadMoreNews())}},{key:"componentDidMount",value:function(){var e=this;this.loadMoreNews(),this.loadMoreNews=f.a.debounce(this.loadMoreNews,1e3),console.log("load more news"),window.addEventListener("scroll",function(){return e.handleScroll()})}},{key:"loadMoreNews",value:function(){var e=this,a=new Request("http://localhost:3000/news",{method:"GET"});fetch(a).then(function(e){return e.json()}).then(function(a){e.setState({news:e.state.news?e.state.news.concat(a):a})})}},{key:"renderNews",value:function(){var e=this.state.news.map(function(e){return s.a.createElement("a",{className:"list-group-item",href:"#"},s.a.createElement(v,{news:e}))});return s.a.createElement("div",{className:"container-fluid"},s.a.createElement("div",{className:"list-group"},e))}},{key:"render",value:function(){return this.state.news?s.a.createElement("div",null,this.renderNews()):s.a.createElement("div",null,s.a.createElement("div",{id:"msg-app-loading"},"Loading"))}}]),a}(n.Component);var b=function(){return s.a.createElement("div",null,s.a.createElement("img",{className:"logo",src:p.a,alt:"logo"}),s.a.createElement("div",{className:"container"},s.a.createElement(N,null)))},y=(t(57),function(e){var a=e.onSubmit,t=e.onChange,n=e.errors;e.user;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card-panel login-panel"},s.a.createElement("form",{className:"col s12",action:"/",onSubmit:a},s.a.createElement("h4",{className:"center-align"},"Login"),n.summary&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.summary)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{className:"validate",id:"email",type:"email",name:"email",onChange:t}),s.a.createElement("label",{htmlFor:"email"},"Email"))),n.email&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.email)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{className:"validate",id:"password",type:"password",name:"password",onChange:t}),s.a.createElement("label",{htmlFor:"password"},"Password"))),n.password&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.password)),s.a.createElement("div",{className:"row right-align"},s.a.createElement("input",{type:"submit",className:"waves-effect waves-light btn indigo lighten-1",value:"Log in"})),s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"right-align"}," ","New to Tap News? ",s.a.createElement(o.a,{to:"/signup"},"Sign Up"))))))}),j=t(1),S=t.n(j),k=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(h.a)(this,Object(w.a)(a).call(this,e,t))).state={errors:{},user:{email:"",password:""}},n}return Object(g.a)(a,e),Object(c.a)(a,[{key:"processForm",value:function(e){var a=this;e.preventDefault();var t=this.state.user.email,n=this.state.user.password;console.log("email:",t),console.log("password:",n);var s="http://"+window.location.hostname+":3000/auth/login",r=new Request(s,{method:"Post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.user.email,password:this.state.user.password})});fetch(r).then(function(e){200===e.status?(a.setState({errors:{}}),e.json().then(function(e){console.log(e),m.authenticateUser(e.token,t),a.context.router.replace("/")})):(console.log("Login failed"),e.json().then(function(e){var t=e.errors?e.errors:{};t.summary=e.message,a.setState({errors:t})}))})}},{key:"changeUser",value:function(e){var a=e.target.name,t=this.state.user;t[a]=e.target.value,this.setState({user:t})}},{key:"render",value:function(){var e=this;return s.a.createElement(y,{onSubmit:function(a){return e.processForm(a)},onChange:function(a){return e.changeUser(a)},errors:this.state.errors,user:this.state.user})}}]),a}(s.a.Component);k.contextTypes={router:S.a.object.isRequired};var O=k,C=(t(58),function(e){var a=e.onSubmit,t=e.onChange,n=e.errors;e.user;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"card-panel signup-panel"},s.a.createElement("form",{className:"col s12",action:"/",onSubmit:a},s.a.createElement("h4",{className:"center-align"},"Sign Up"),n.summary&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.summary)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"email",type:"email",name:"email",className:"validate",onChange:t}),s.a.createElement("label",{htmlFor:"email"},"Email"))),n.email&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.email)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"password",type:"password",name:"password",className:"validate",onChange:t}),s.a.createElement("label",{htmlFor:"password"},"Password"))),n.password&&s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"error-message"},n.password)),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"input-field col s12"},s.a.createElement("input",{id:"confirm_password",type:"password",name:"confirm_password",className:"validate",onChange:t}),s.a.createElement("label",{htmlFor:"confirm_password"},"Conform Password"))),s.a.createElement("div",{className:"row right-align"},s.a.createElement("input",{type:"submit",className:"waves-effect waves-light btn indigo lighten-1",value:"Sign Up"})),s.a.createElement("div",{className:"row"},s.a.createElement("p",{className:"right-align"}," ","Already have an account? ",s.a.createElement(o.a,{to:"/login"},"Login"))))))}),U=function(e){function a(e,t){var n;return Object(i.a)(this,a),(n=Object(h.a)(this,Object(w.a)(a).call(this,e,t))).state={errors:{},user:{email:"",password:"",confirm_password:""}},n}return Object(g.a)(a,e),Object(c.a)(a,[{key:"processForm",value:function(e){var a=this;e.preventDefault();var t=this.state.user.email,n=this.state.user.password,s=this.state.user.confirm_password;if(console.log("email:",t),console.log("password:",n),console.log("confirm_password:",s),n===s){var r="http://"+window.location.hostname+":3000/auth/signup",l=new Request(r,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:this.state.user.email,password:this.state.user.password})});fetch(l).then(function(e){200===e.status?(a.setState({errors:{}}),a.context.router.replace("/login")):e.json().then(function(e){console.log(e);var t=e.errors?e.errors:{};t.summary=e.message,console.log(a.state.errors),a.setState({errors:t})})})}}},{key:"changeUser",value:function(e){var a=e.target.name,t=this.state.user;t[a]=e.target.value,this.setState({user:t});var n=this.state.errors;this.state.user.password!==this.state.user.confirm_password?n.password="Password and confirm password dont match":n.password="",this.setState({errors:n})}},{key:"render",value:function(){var e=this;return s.a.createElement(C,{onSubmit:function(a){return e.processForm(a)},onChange:function(a){return e.changeUser(a)},errors:this.state.errors,user:this.state.user})}}]),a}(s.a.Component);U.contextTypes={router:S.a.object.isRequired};var T={component:u,childRoutes:[{path:"/",getComponent:function(e,a){m.isUserAuthenticated()?a(null,b):a(null,O)}},{path:"/login",component:O},{path:"/signup",component:U},{path:"/logout",onEnter:function(e,a){m.deauthenticateUser(),a("/")}}]};t(59),t(60);l.a.render(s.a.createElement(o.b,{history:o.c,routes:T}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.f31047c6.chunk.js.map